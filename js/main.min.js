!function(){"use strict";const e=document.getElementById("canvas"),t=e?.getContext("2d");function n(){const e=Math.min(window.innerWidth,window.innerHeight);return Math.max(3,e/120)}let o=n();const i=[];function d(){e&&(e.width=window.innerWidth,e.height=window.innerHeight,o=n())}window.addEventListener("resize",d),d();for(let e=0;e<100;e++)i.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,dx:8*(Math.random()-.5),dy:8*(Math.random()-.5)});function s(e){document.body.classList.toggle("dark","dark"===e),document.body.classList.toggle("light","light"===e)}!function n(){if(t&&e){t.fillStyle=getComputedStyle(document.body).getPropertyValue("--bg-color"),t.fillRect(0,0,e.width,e.height),t.fillStyle=getComputedStyle(document.body).getPropertyValue("--square-color").trim();for(const n of i)n.x+=n.dx,n.y+=n.dy,(n.x<0||n.x+o>e.width)&&(n.dx*=-1),(n.y<0||n.y+o>e.height)&&(n.dy*=-1),t.fillRect(n.x,n.y,o,o);requestAnimationFrame(n)}}(),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("themeToggle");e&&e.addEventListener("click",()=>{document.body.classList.toggle("dark"),localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light")});s(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||s(e.matches?"dark":"light")})}),document.querySelectorAll("a[href]").forEach(e=>{e.addEventListener("click",function(t){const n=e.getAttribute("href");if(!n.startsWith("http")&&!n.startsWith("#")&&!e.hasAttribute("target")){t.preventDefault();document.getElementById("pageWrapper").classList.add("fade-out"),setTimeout(()=>{window.location.href=n},400)}})});const a=document.getElementById("menuToggle");let l=!1;const c='<svg width="40" height="40" viewBox="0 0 40 40" fill="currentColor"><path d="M40 33H0V28H40V33ZM40 22H0V17H40V22ZM40 11H0V6H40V11Z"/></svg>';function r(){const e=window.innerWidth/window.innerHeight,t=window.innerHeight,n=window.devicePixelRatio||1;let o=Math.min(8,Math.max(3,5*e));(t<800||n<1.5)&&(o*=1.2),document.documentElement.style.setProperty("--dynamic-font-size",`${o}vw`)}function m(){const e=document.getElementById("centerText"),t=e.dataset.short;window.matchMedia("(max-aspect-ratio: 3 / 4)").matches?e.textContent=t:e.textContent="DFRONDER"}a.innerHTML=c,a.addEventListener("click",()=>{a.querySelector("svg").classList.add("fade-out"),setTimeout(()=>{l=!l,a.innerHTML=l?'<svg width="40" height="40" viewBox="0 0 40 40" fill="currentColor"><path d="M15 32H10V27H15V32ZM10 27H5V22H0V17H5V12H10V17H40V22H10V27ZM15 12H10V7H15V12Z"/></svg>':c;const e=a.querySelector("svg");e.classList.add("fade-out"),e.offsetWidth,e.classList.remove("fade-out"),document.getElementById("sideMenu")?.classList.toggle("open",l)},300)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("menuToggle"),t=document.getElementById("hamburgerIcon"),n=document.getElementById("backIcon"),o=document.getElementById("sideMenu"),i=document.getElementById("splashText"),d=document.getElementById("footerNote");if(!e)return;let s=!1;e.addEventListener("click",()=>{s=!s,o?.classList.toggle("open",s),i?.classList.toggle("menu-open",s),d?.classList.toggle("menu-open",s),t&&n&&(s?(t.classList.add("hidden"),setTimeout(()=>n.style.display="block",150),setTimeout(()=>n.classList.remove("hidden"),160)):(n.classList.add("hidden"),setTimeout(()=>n.style.display="none",150),setTimeout(()=>t.classList.remove("hidden"),160)))})}),window.addEventListener("DOMContentLoaded",m),window.addEventListener("resize",m),window.addEventListener("resize",r),r(),document.addEventListener("DOMContentLoaded",()=>{const e=["世界が終わるまでは","君がいない世界なんて","空は高く風は歌う","光よりも速く走り抜けろ！","悲しみも痛みも全部受け止めて","世界を壊して、変えてしまえよ","命を賭けて戦うんだ！","誰にも負けたくない","限界なんて、ぶっ壊せ！","翼は折れても、空を夢見る","まだ終わりじゃない！","誇り高き魂よ、燃え上がれ！","昨日の僕に負けたくない","孤独も力に変えてやる","痛みの数だけ、強くなれる","闇を切り裂け、光の刃で！","世界を変える！","君が光","この涙は強さ","愛は痛い","この瞬間に賭けてみろ！","自由はここにある","負けるな！","今を生きろ！","今日は何かが起きる気がする！","テンションMAX！暴走モード！","心は迷子のまま","空に描いた約束"];let t=0;const n=document.getElementById("splashText"),o=document.getElementById("centerText"),i=document.getElementById("footerNote");function d(){return window.innerWidth/window.innerHeight<3/4}function s(){if(!o||!i)return;if(!d())return void(n.style.fontSize="");const e=o.getBoundingClientRect(),t=i.getBoundingClientRect(),s=e.bottom+30,a=t.top-16-s;if(a<=0)return;let l=a/(n.textContent.length||1);l=Math.min(Math.max(l,16),64),n.style.fontSize=l+"px"}function a(e){n.style.opacity=0,setTimeout(()=>{if(n.innerHTML="",d()){n.style.writingMode="vertical-rl",n.style.textOrientation="upright";for(const t of e){const e=document.createElement("span");e.textContent=t,e.style.display="block",n.appendChild(e)}}else n.style.writingMode="horizontal-tb",n.style.textOrientation="initial",n.textContent=e;s(),setTimeout(()=>{n.style.opacity=1},50)},500)}window.addEventListener("resize",s),a(e[t]),setTimeout(()=>{n.style.opacity=1},500),setInterval(function(){t=(t+1)%e.length,a(e[t])},5e3)})}();
